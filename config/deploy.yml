# Kamal 2 deploy config — https://kamal-deploy.org
service: astroscope
image: trombs/astroscope

servers:
  web:
    - 143.198.51.23

proxy:
  ssl: true
  host: astroscope.trombs.com
  healthcheck:
    path: /
    interval: 3

registry:
  server: registry.digitalocean.com
  username:
    - KAMAL_REGISTRY_USERNAME
  password:
    - KAMAL_REGISTRY_PASSWORD

builder:
  arch: amd64
  context: ..
  dockerfile: Dockerfile
  cache:
    type: gha   # GitHub Actions layer cache — free, fast
